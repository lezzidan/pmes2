# Copyright 2002-2007 Barcelona Supercomputing Center (www.bsc.es)
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

SUBDIRS = etc

bin_SCRIPTS = gsbuild gsjavabuild gsperlbuild
nobase_dist_pkgdata_DATA = \
	build/c/master/configure.in \
	build/c/master/Makefile.am \
	build/c/master/config_master.sh.in \
	build/c/worker/configure.in \
	build/c/worker/Makefile.am \
	build/c/worker/config_worker.sh.in \
	build/c/all/configure.in \
	build/c/all/Makefile.am \
	build/c/all/config_all.sh.in \
	build/java/master/configure.in \
	build/java/master/Makefile.am \
	build/java/master/config_master.sh.in \
	build/java/worker/configure.in \
	build/java/worker/Makefile.am \
	build/java/worker/config_worker.sh.in \
	build/java/all/configure.in \
	build/java/all/Makefile.am \
        build/java/all/config_all.sh.in \
	build/perl/master/configure.in \
	build/perl/master/Makefile.am \
	build/perl/master/config_master.sh.in \
	build/perl/master/acinclude.m4 \
	build/perl/worker/configure.in \
	build/perl/worker/Makefile.am \
	build/perl/worker/config_worker.sh.in \
	build/perl/worker/acinclude.m4 \
	build/scripts/build_worker_scripts.sh

BUILT_SOURCES = gsbuild gsjavabuild gsperlbuild build/scripts/build_worker_scripts.sh

install-exec-local: build/c/master/config_master.sh.in
	$(mkinstalldirs) $(pkgdatadir)/build/c/master
	$(mkinstalldirs) $(pkgdatadir)/build/c/worker
	$(mkinstalldirs) $(pkgdatadir)/build/c/all
	$(mkinstalldirs) $(pkgdatadir)/build/java/master
	$(mkinstalldirs) $(pkgdatadir)/build/java/worker
	$(mkinstalldirs) $(pkgdatadir)/build/java/all
	$(mkinstalldirs) $(pkgdatadir)/build/perl/master
	$(mkinstalldirs) $(pkgdatadir)/build/perl/worker
	$(mkinstalldirs) $(pkgdatadir)/build/scripts

CLEANFILES =
CLEANFILES += build/c/master/config_master.sh.in
CLEANFILES += build/c/all/config_all.sh.in
CLEANFILES += build/java/master/config_master.sh.in
CLEANFILES += build/java/all/config_all.sh.in

build/c/master/config_master.sh.in : $(srcdir)/build/c/master/config_master.sh.in.in
	sed -e "s/@\([^_]*\)_noreplace@/@\1@/" $(srcdir)/build/c/master/config_master.sh.in.in > build/c/master/config_master.sh.in
build/c/all/config_all.sh.in : $(srcdir)/build/c/all/config_all.sh.in.in
	sed -e "s/@\([^_]*\)_noreplace@/@\1@/" $(srcdir)/build/c/all/config_all.sh.in.in > build/c/all/config_all.sh.in
build/java/master/config_master.sh.in : $(srcdir)/build/java/master/config_master.sh.in.in
	sed -e "s/@\([^_]*\)_noreplace@/@\1@/" $(srcdir)/build/java/master/config_master.sh.in.in > build/java/master/config_master.sh.in
build/java/all/config_all.sh.in : $(srcdir)/build/java/all/config_all.sh.in.in
	sed -e "s/@\([^_]*\)_noreplace@/@\1@/" $(srcdir)/build/java/all/config_all.sh.in.in > build/java/all/config_all.sh.in
